.card {
    background: var(--bg-surface);
    border: 1px solid var(--line-soft);
    border-radius: 20px;
    padding: 16px;
    margin: 16px;
    backdrop-filter: blur(40px) saturate(180%);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
}

.glass-nav {
    position: fixed;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: min(430px, 100vw);
    height: calc(74px + var(--safe-bottom));
    background: var(--bg-glass);
    backdrop-filter: blur(40px) saturate(180%);
    border-top: 1px solid var(--line-soft);
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    padding-bottom: var(--safe-bottom);
    z-index: 100;
}

.nav-item { display:flex; flex-direction:column; align-items:center; justify-content:center; color:var(--text-sub); gap:4px; font-size:10px; font-weight:700; transition: all .26s var(--ease-fluid); }
.nav-item.active { color: var(--accent-main); text-shadow: 0 0 10px rgba(255, 106, 0, .45); }
.nav-item svg { width:21px; height:21px; fill:currentColor; }

.day-strip-wrap { background: var(--bg-glass); border-bottom: 1px solid var(--line-soft); backdrop-filter: blur(36px) saturate(180%); padding: 8px 12px 10px; }
.day-strip-head { display:grid; grid-template-columns: 42px 1fr 42px; align-items:center; gap:8px; margin-bottom:8px; }
.day-current { background: var(--bg-surface); border:1px solid var(--line-soft); border-radius:14px; color: var(--text-main); min-height:42px; display:flex; flex-direction:column; justify-content:center; text-align:center; }
.day-current span { font-size:13px; font-weight:700; text-transform: capitalize; }
.day-current small { color: var(--text-sub); font-size:10px; }
.day-strip { display:flex; overflow-x:auto; gap:8px; }
.day-pill { min-width:56px; height:70px; background: var(--bg-surface); border-radius:16px; display:flex; flex-direction:column; align-items:center; justify-content:center; border:1px solid var(--line-soft); color: var(--text-sub); transition: all .2s var(--ease-fluid); gap:3px; }
.day-pill.active { color: var(--text-main); border-color: var(--line-strong); box-shadow: var(--glow-main); background: var(--grad-liquid); }
.day-cal-track { width:38px; height:5px; border-radius:999px; background: rgba(255,255,255,.12); overflow:hidden; }
.day-cal-fill { height:100%; background: var(--accent-main); box-shadow: 0 0 8px rgba(255, 106, 0, .4); }

.input-group { margin-bottom:14px; }
.input-label { display:block; color:var(--text-sub); font-size:11px; margin-bottom:6px; text-transform:uppercase; letter-spacing:.08em; }
.input-field { width:100%; background: var(--bg-surface-2); color:var(--text-main); padding:13px; border-radius:12px; border:1px solid var(--line-soft); font-size:15px; transition: border-color .2s, transform .2s; }
.input-field:focus { border-color: var(--line-strong); }
.input-field:disabled { opacity:.5; cursor:not-allowed; }

select.input-field {
    appearance: none;
    -webkit-appearance: none;
    background-image: linear-gradient(45deg, transparent 50%, var(--accent-main) 50%), linear-gradient(135deg, var(--accent-main) 50%, transparent 50%);
    background-position: calc(100% - 18px) calc(50% + 2px), calc(100% - 12px) calc(50% + 2px);
    background-size: 6px 6px, 6px 6px;
    background-repeat: no-repeat;
    padding-right: 32px;
}

.btn-primary { background: var(--grad-primary); color:#fff; padding:12px 14px; border-radius:14px; width:100%; font-weight:800; font-size:14px; min-height:44px; display:inline-flex; align-items:center; justify-content:center; gap:8px; box-shadow:0 8px 32px rgba(255,106,0,.3); transition: transform .2s var(--ease-fluid), opacity .2s; }
.btn-primary:active { transform: scale(.97); opacity: .88; }
.btn-primary:disabled { opacity:.45; box-shadow:none; cursor:not-allowed; }
.btn-muted { background: var(--bg-surface); color: var(--text-sub); border:1px solid var(--line-soft); padding:12px; border-radius:14px; min-height:44px; display:inline-flex; align-items:center; justify-content:center; gap:8px; }
.btn-muted:active { transform: scale(.97); }
.btn-icon { width:34px; height:34px; border-radius:10px; border:1px solid var(--line-soft); color:var(--accent-cyan); display:grid; place-items:center; flex-shrink:0; background:var(--bg-surface); }
.btn-icon svg { width:17px; height:17px; }
.btn-danger { color: var(--accent-red); border-color: rgba(255,69,58,.45); }
.btn-icon.is-active { color: var(--accent-main); border-color: var(--line-strong); }

.icon-nav-btn { width:42px; height:42px; border-radius:12px; border:1px solid var(--line-soft); display:grid; place-items:center; color:var(--accent-main); background: var(--bg-surface); }
.icon-nav-btn:disabled { color: var(--text-dim); cursor:not-allowed; }
.icon-nav-btn svg { width:18px; height:18px; }

.btn-float { position:fixed; bottom: calc(86px + var(--safe-bottom)); right:calc((100vw - min(430px, 100vw)) / 2 + 20px); width:54px; height:54px; border-radius:18px; display:grid; place-items:center; background:var(--grad-primary); color:#fff; box-shadow: 0 8px 30px rgba(255,106,0,.35); z-index:90; }
.btn-float svg{width:20px;height:20px;}

.list-item { display:flex; justify-content:space-between; align-items:flex-start; gap:8px; padding:14px 16px; margin-bottom:8px; background: var(--bg-surface); border:1px solid var(--line-soft); border-radius:16px; min-width:0; backdrop-filter: blur(24px); }
.section-title-row { display:flex; justify-content:space-between; align-items:center; margin: 10px 0; }
.section-title-row h3 { font-size: 13px; color: var(--text-sub); text-transform: uppercase; letter-spacing: .08em; }
.meal-card { margin: 0 0 14px 0; border-radius: 20px; }
.meal-label-icon { width:18px; height:18px; color:var(--accent-main); display:inline-grid; place-items:center; }
.meal-head { display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:10px; }
.meal-label { display:inline-flex; align-items:center; gap:8px; font-size:13px; font-weight:700; letter-spacing:.08em; text-transform:uppercase; color:var(--text-sub); }
.meal-head-actions { display:flex; align-items:center; gap:6px; }
.meal-empty { min-height:56px; border:1px dashed var(--line-soft); border-radius:14px; display:flex; align-items:center; justify-content:center; color:var(--text-sub); font-size:13px; background: var(--bg-surface-2); }
.meal-entry { padding:12px 14px; }
.meal-entry-top { display:flex; align-items:flex-start; justify-content:space-between; gap:10px; }
.meal-entry-main { min-width:0; display:flex; align-items:flex-start; gap:10px; flex:1; }
.meal-entry-icon { width:18px; height:18px; margin-top:2px; flex-shrink:0; }
.entry-title { font-size:15px; font-weight:600; color:var(--text-main); line-height:1.25; }
.entry-sub { margin-top:3px; font-size:12px; color:var(--text-sub); }
.entry-actions { display:flex; align-items:center; gap:6px; }
.entry-actions-right { margin-left:auto; }

.macro-stack { display:flex; align-items:center; flex-wrap:wrap; gap:8px; }
.macro-stack-bottom { margin-top:10px; }
.macro-pill { display:inline-flex; align-items:center; gap:4px; padding:4px 8px; border-radius:999px; font-size:11px; font-weight:700; color:var(--text-sub); background: var(--bg-surface-2); border:1px solid var(--line-soft); }
.macro-pill-strong { color:var(--text-main); }
.macro-icon { width:14px; height:14px; display:inline-grid; place-items:center; }

.products-screen { display:flex; flex-direction:column; gap:12px; }
.screen-shell { padding: 0 16px; }
.screen-header { padding: 14px 20px 10px; }
.screen-header h1 { font-size: 24px; font-weight: 800; letter-spacing: -0.02em; }
.toolbar-card { margin: 0; padding: 12px; }
.search-shell { display:flex; align-items:center; gap:8px; }
.search-input { flex:1; min-height:42px; }
.products-controls { display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:10px; }
.products-filter-switch { display:grid; grid-template-columns:1fr 1fr; gap:6px; background: var(--bg-surface-2); border:1px solid var(--line-soft); border-radius:14px; padding:4px; }
.chip-switch { min-height:36px; border-radius:10px; border-color: transparent; font-size:12px; font-weight:700; padding:6px 8px; }
.chip-switch.is-active { background: var(--grad-primary); color:#fff; box-shadow: 0 8px 24px rgba(255,106,0,.3); }
.chip-large { min-height:44px; width:100%; }
.product-add-btn { min-height:44px; }
.sort-row { display:flex; flex-direction:column; gap:6px; margin-top:10px; }
.input-label-tight { margin:0; }
.macro-input { text-align:center; }
.product-actions { display:flex; gap:6px; margin-left:10px; }
.pager-row { display:flex; align-items:center; justify-content:center; gap:12px; color:var(--text-sub); font-size:13px; padding:8px 0 0; }
.products-results { margin-bottom: 8px; font-size: 12px; color: var(--text-sub); }
.product-form-card { margin: 0 0 8px 0; border-color: var(--line-strong); }
.product-form-title { margin-bottom: 12px; font-size: 13px; color: var(--accent-main); text-transform: uppercase; letter-spacing:.08em; }
.product-name-input { margin-bottom: 8px; }
.product-grid-fields { display: grid; grid-template-columns: repeat(4, minmax(0, 1fr)); gap: 8px; }
.color-palette { margin-top:12px; display:flex; gap:8px; flex-wrap:wrap; }
.color-opt { width:24px; height:24px; border-radius:50%; border:1px solid rgba(0,0,0,.35); }
.color-opt.is-active { border:2px solid #fff; box-shadow: 0 0 0 2px rgba(255,106,0,.28); }
.icon-palette { margin-top:8px; display:flex; gap:8px; flex-wrap:wrap; }
.icon-opt { width:36px; height:36px; border-radius:10px; border:1px solid var(--line-soft); color:var(--text-sub); display:grid; place-items:center; background: var(--bg-surface-2); }
.icon-opt.is-active { border-color: var(--line-strong); color:var(--accent-main); box-shadow: var(--glow-main); }
.icon-opt svg { width:18px; height:18px; }
.product-form-select { margin-top:10px; }
.product-form-actions { display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:12px; }
.product-row { align-items:stretch; }
.product-copy { min-width:0; }

.week-chart { height: 180px; display:grid; grid-template-columns: repeat(7, minmax(0,1fr)); gap:8px; align-items:end; }
.week-card { margin: 0 0 12px 0; }
.week-head { display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; gap:8px; }
.week-head strong { text-align:center; font-size:13px; }
.week-chart-bar { min-height:164px; border-radius:16px; border:1px solid var(--line-soft); background: var(--bg-surface-2); padding:8px 6px; display:flex; flex-direction:column; justify-content:flex-end; align-items:center; gap:6px; transition: transform .2s var(--ease-fluid), border-color .2s var(--ease-fluid), box-shadow .2s var(--ease-fluid); }
.week-chart-bar.active { border-color: var(--line-strong); box-shadow: var(--glow-main); transform: translateY(-2px); }
.week-chart-bar .fill { width:100%; border-radius:9px; min-height:10px; box-shadow: inset 0 0 0 1px rgba(255,255,255,.08); }
.week-bar-date { font-size:11px; color:var(--text-sub); }
.week-bar-kcal { font-size:10px; color:var(--text-main); font-weight:700; }
.week-legend-row { margin-top:10px; display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.week-average-pill { margin-left:auto; font-size:11px; font-weight:700; color:var(--accent-main); padding:5px 10px; border-radius:999px; background: rgba(255,106,0,.12); border:1px solid rgba(255,106,0,.3); }
.week-detail-card { margin: 0 0 16px 0; }
.week-day-title { margin-bottom:10px; text-transform: capitalize; font-size:17px; font-weight:700; }
.week-meal-group { margin-bottom:10px; }
.meal-label-week { margin-bottom:8px; }
.edit-inline { width:74px; padding:7px 8px; text-align:right; }
.macro-icon.protein, .macro-protein { color: var(--macro-protein); }
.macro-icon.carbs, .macro-carb { color: var(--macro-carb); }
.macro-icon.fat, .macro-fat { color: var(--macro-fat); }
.meal-kcal, .week-legend-item.kcal { color: var(--macro-cal); font-weight: 800; }

.progress-track { height: 6px; border-radius: 999px; background: rgba(255,255,255,.12); overflow: hidden; }
.progress-fill { height: 100%; border-radius: inherit; }

.backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.35); backdrop-filter: blur(10px); opacity: 0; transition: opacity .28s var(--ease-fluid); z-index: 220; }
.backdrop.open { opacity: 1; }
.modal-sheet { position: fixed; left: 10px; right: 10px; bottom: 10px; border-radius: 24px 24px 16px 16px; background: var(--bg-surface); border: 1px solid var(--line-soft); backdrop-filter: blur(40px) saturate(180%); padding: 18px; transform: translateY(120%); transition: transform .34s var(--ease-fluid); z-index: 221; box-shadow: 0 20px 40px rgba(0,0,0,.28); }
.modal-sheet.open { transform: translateY(0); }

.products-toolbar, .profile-picker, .week-summary-card { background: var(--bg-surface); border:1px solid var(--line-soft); border-radius:20px; backdrop-filter: blur(40px) saturate(180%); }
.search-icon { width:16px; height:16px; color: var(--accent-main); }
.product-macros { font-size: 11px; color: var(--text-sub); margin-top: 2px; display:flex; align-items:center; gap:6px; flex-wrap:wrap; }

.toast-holder { position: fixed; left: 12px; right:12px; top: calc(var(--safe-top) + 12px); z-index:400; display:flex; flex-direction:column; gap:8px; pointer-events:none; }
.toast { background: var(--bg-surface); border:1px solid var(--line-soft); color:var(--text-main); border-radius:14px; padding:11px 12px; transform: translateY(-12px) scale(.98); opacity:0; transition: all .28s var(--ease-fluid); box-shadow: 0 10px 24px rgba(0,0,0,.2); display:flex; gap:8px; align-items:center; backdrop-filter: blur(24px); }
.toast.show { transform: translateY(0) scale(1); opacity:1; }
.toast-warning { border-color: rgba(255,69,58,.5); }
.toast-icon { width:20px; height:20px; border-radius:8px; display:grid; place-items:center; color:var(--accent-main); background:rgba(255,106,0,.12); flex-shrink:0; }

.equal-row { display:grid; grid-template-columns: 1fr 104px; gap:10px; align-items:end; }
.equal-row .input-field { min-height: 46px; }

.loading-screen { position: fixed; inset: 0; z-index: 350; background: rgba(0, 0, 0, 0.6); display:flex; flex-direction:column; align-items:center; justify-content:center; gap:14px; backdrop-filter: blur(10px); }
.loader-orb { width:62px; height:62px; border-radius:50%; border:4px solid rgba(255,255,255,.18); border-top-color: var(--accent-main); animation: spin 1s linear infinite; box-shadow: var(--glow-main); }
.loading-label { font-size:14px; color:var(--text-sub); letter-spacing: .02em; }

.profile-picker-backdrop { position: fixed; inset:0; background: rgba(0,0,0,.45); z-index:299; backdrop-filter: blur(8px); }
.profile-picker { position: fixed; z-index:300; left: 12px; right: 12px; top: 50%; transform: translateY(-50%); padding:18px; }
.profile-head { display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:12px; }
.profile-head h2 { font-size:18px; font-weight:800; }
.profile-hint { margin-bottom:12px; font-size:12px; color:var(--text-sub); }
.chip-btn { min-height:36px; padding:8px 12px; }
.profile-grid { display:grid; grid-template-columns:1fr 1fr; gap:8px; }
.profile-card { background: var(--bg-surface-2); border:1px solid var(--line-soft); border-radius:16px; padding:10px; text-align:left; display:flex; align-items:center; gap:10px; color:var(--text-main); }
.profile-card:active { transform: scale(.98); }
.profile-card:hover { border-color: var(--line-strong); }
.profile-avatar { width:34px; height:34px; border-radius:10px; display:grid; place-items:center; color:var(--accent-main); background: rgba(255,106,0,.12); flex-shrink:0; }
.profile-avatar svg { width:20px; height:20px; }
.profile-name { font-size:14px; font-weight:700; }
.profile-card .profile-name { flex:1; }
.profile-tools { margin-left:auto; display:flex; gap:6px; }
.profile-tool { width:28px; height:28px; border-radius:8px; border:1px solid var(--line-soft); display:grid; place-items:center; color:var(--text-sub); }
.profile-tool svg { width:15px; height:15px; }
.profile-tool.danger { color:var(--accent-red); border-color: rgba(255,69,58,.4); }
.profile-add-btn { margin-top:12px; }
.profile-editor { margin-top:12px; border-top:1px solid var(--line-soft); padding-top:12px; }
.profile-editor h3 { font-size:13px; color:var(--accent-main); margin-bottom:8px; text-transform:uppercase; letter-spacing:.08em; }
.profile-avatar-grid { margin-top:10px; display:grid; grid-template-columns:repeat(4, minmax(0,1fr)); gap:8px; }
.profile-avatar-pick { min-height:40px; border-radius:12px; border:1px solid var(--line-soft); color:var(--text-sub); background:var(--bg-surface-2); display:grid; place-items:center; }
.profile-avatar-pick.active { border-color: var(--line-strong); box-shadow: var(--glow-main); }
.profile-editor-actions { margin-top:10px; display:grid; grid-template-columns:1fr 1fr; gap:8px; }

.sync-github-btn {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    width: 48px;
    height: 48px;
    min-height: 48px;
    bottom: calc(94px + var(--safe-bottom));
    z-index: 130;
    border-radius: 999px;
    transition: transform .24s var(--ease-fluid), opacity .24s var(--ease-fluid), width .24s var(--ease-fluid);
}
.sync-github-btn span { font-size: 13px; }
.sync-github-btn.is-collapsed {
    width: 48px;
}
.sync-github-btn.is-collapsed svg,
.sync-github-btn:not(.is-collapsed) svg { width:18px; height:18px; }
.sync-github-btn:not(.is-collapsed) {
    width: min(130px, calc(100vw - 34px));
    height: 42px;
    min-height: 42px;
}
.sync-github-btn.is-collapsed span {
    position: absolute;
    width: 1px;
    height: 1px;
    clip: rect(0 0 0 0);
    overflow: hidden;
    white-space: nowrap;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}
